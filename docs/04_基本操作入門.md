# 04. 基本操作入門

> **対象**: Git初心者  
> **所要時間**: 30分程度

## この章で学ぶこと

- 変更の確認方法
- ステージングとコミット
- プッシュとプル
- 基本的なワークフロー

---

## 1. 変更の確認

### 現在の状況を確認

```bash
# 変更状況を確認
git status
```

**よく見る状態**:
- `Untracked files`: 新しく作成したファイル
- `Changes not staged`: 既存ファイルの変更
- `Changes to be committed`: コミット準備完了

### 実際の出力例

```bash
$ git status
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   src/App.js

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        new-file.txt

no changes added to commit (use "git add" or "git commit -a")
```

### 変更内容の詳細確認

```bash
# 変更内容の詳細を確認
git diff
```

**出力例**:
```bash
$ git diff
diff --git a/src/App.js b/src/App.js
index 1234567..abcdefg 100644
--- a/src/App.js
+++ b/src/App.js
@@ -1,5 +1,6 @@
 function App() {
   return (
     <div className="App">
+      <h1>Hello World!</h1>
       <p>Welcome to my app</p>
     </div>
   );
```

---

## 2. ステージング（コミット準備）

### ステージングとは

コミット（保存）する変更を選ぶ作業。変更したファイルを「コミット用の箱」に入れるイメージです。

### ステージングの実行

```bash
# 特定のファイルをステージング
git add filename.txt

# すべての変更をステージング
git add .

# ステージングの確認
git status
```

### ステージング後の状態

```bash
$ git status
On branch main
Your branch is up to date with 'origin/main'.

Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   src/App.js
        new file:   new-file.txt
```

---

## 3. コミット（変更の記録）

### コミットの実行

```bash
# コミットメッセージと一緒に記録
git commit -m "feat: ログイン機能を追加"
```

### コミットメッセージのルール

- `feat:` 新機能
- `fix:` バグ修正
- `docs:` ドキュメント更新
- `style:` コードの見た目修正
- `refactor:` リファクタリング
- `test:` テスト追加・修正

### コミットの確認

```bash
# コミット履歴を確認
git log --oneline -3
```

**期待される結果**:
```
abc1234 feat: ログイン機能を追加
def0987 fix: バグを修正
1234567 docs: READMEを更新
```

---

## 4. プッシュ（リモートに送信）

### プッシュの実行

```bash
# 変更をGitHubに送信
git push origin main
```

**注意**: ブランチ名が`master`の場合は`git push origin master`を使用

### 初回プッシュ（新しいブランチの場合）

```bash
# 新しいブランチを初回プッシュする時は -u オプションが必要
git push -u origin feature/my-feature

# 2回目以降は -u なしでOK
git push
```

---

## 5. プル（リモートから取得）

### プルの実行

```bash
# 最新の変更を取得
git pull origin main
```

### プルの確認

```bash
# 取得後の状況を確認
git status
```

---

## 6. 基本的なワークフロー

### 日常的な作業の流れ

```bash
# 1. 最新の変更を取得
git pull origin main

# 2. 作業を行う（ファイルを編集）

# 3. 変更を確認
git status
git diff

# 4. 変更をステージング
git add .

# 5. コミット
git commit -m "feat: 新機能を実装"

# 6. プッシュ
git push origin main
```

---

## 7. よくある操作

### ステージングの取り消し

```bash
# ステージングした変更を取り消し（箱から出す）
git reset HEAD filename.txt
```

### 直前のコミットの修正

```bash
# 直前のコミットメッセージを修正
git commit --amend -m "新しいメッセージ"
```

**注意**: プッシュ前のみ使用可能

### 変更の破棄

```bash
# 未ステージングの変更を破棄
git restore filename.txt

# または
git checkout -- filename.txt
```

---

## 8. トラブルシューティング

### エラー: `nothing to commit, working tree clean`

**原因**: 変更がない状態でコミットしようとした

**対処法**: ファイルを編集してから再度コミット

### エラー: `fatal: The current branch has no upstream branch`

**原因**: 新しいブランチを初回プッシュする時

**対処法**:
```bash
# 上流ブランチを設定してプッシュ
git push -u origin branch-name
```

### エラー: `Your local changes would be overwritten by merge`

**原因**: ローカルに未コミットの変更がある状態でプル

**対処法**:
```bash
# 変更を一時保存
git stash

# プルを実行
git pull origin main

# 保存した変更を復元
git stash pop
```

---

## 9. 次のステップ

基本操作をマスターしたら、以下を学習してください：

- [05_ブランチとプルリクエスト.md](05_ブランチとプルリクエスト.md) - チーム開発の基本
- [06_トラブルシューティング.md](06_トラブルシューティング.md) - エラー対処法

---

## よくある質問

### Q: コミットメッセージは日本語でも大丈夫ですか？
A: はい、日本語でも問題ありません。ただし、チームのルールに従ってください。

### Q: 一度に複数のファイルをコミットできますか？
A: はい、`git add .`で複数ファイルをステージングしてからコミットできます。

### Q: コミットを削除できますか？
A: プッシュ前であれば`git reset`で削除可能です。プッシュ後は慎重に操作してください。

### Q: どのくらいの頻度でコミットすればいいですか？
A: 機能単位や論理的な変更単位でコミットすることをお勧めします。小さく頻繁にコミットするのが良い習慣です。
